<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Delta Green Character Sheet</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Firebase SDKs -->
  <script type="module">
    // Import Firebase modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
  
    const firebaseConfig = {
      apiKey: "AIzaSyArii21GqpsShFeHtMHzgRT--73h1D3hQ",
      authDomain: "deltagreenapp.firebaseapp.com",
      projectId: "deltagreenapp",
      storageBucket: "deltagreenapp.appspot.com",
      messagingSenderId: "304292452847",
      appId: "1:304292452847:web:bce1fcb501470fe3c5be1a"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    window.db = getFirestore(app); // Expose `db` globally
  </script>
  

  <!-- THEN load your main JS -->
  <script src="script.js"></script>

</head>

<body>


  <div class="container">

    <!-- HEADER BLOCK AT THE TOP OF THE PAGE -->
    <header class="top-header">
      <div class="hamburger-wrapper" style="position: relative;">
        <div id="menu-overlay"></div>

        <!-- ☰ Hamburger toggle button -->
        <button id="hamburger-toggle" class="hamburger-button">☰</button>

        <!-- Slide-out hamburger menu -->
        <div id="hamburger-menu" class="hamburger-menu">
          <a href="index.html">HOME</a>
          <button onclick="openSaveModal()">Save Character</button>
          <label for="load-file" class="menu-item">Load Character</label>
          <input type="file" id="load-file" accept=".json" style="display: none" />
          <button onclick="resetCharacter()">Reset Character</button>
          <button id="dark-mode-button" class="menu-item">Dark Mode</button>
          <button id="lock-toggle">Unlocked</button>
          <button onclick="openDiceModal()">Dice Roller</button>
          <button onclick="saveToFirebase(prompt('Enter character name'), gatherCharacterData())">Save to
            Firebase</button>
          <button onclick="loadFromFirebase(prompt('Enter character name'))">Load from Firebase</button>
        </div>
      </div>
    </header>



    <h1>&Delta; Agent Profile</h1>

    <div class="section grid">
      <div><label for="agent">Agent</label><input type="text" id="agent"></div>
      <div><label for="player">Player</label><input type="text" id="player"></div>
    </div>

    <details open>
      <summary>
        <h2>Health & Sanity</h2>
      </summary>
      <div class="section grid">
        <div class="label-with-tooltip">
          <label>
            Health
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
        
          <span class="info-popup">4 + Strength + Endurance + Resolve</span>
        
          <div class="dot-container">
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
            <div class="dot health"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Sanity
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
        
          <span class="info-popup">5 + Focus + Resolve + Awareness (Full Pips)</span>
        
          <div class="dot-container">
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
            <div class="dot sanity"></div>
          </div>
        </div>
      </div>

      <div class="toggle-wrapper">
        <label class="toggle-label">
          <span id="core-label-off">Physical, Mental, Social</span>
          <label class="switch">
            <input type="checkbox" id="core-toggle">
            <span class="slider round"></span>
          </label>
          <span id="core-label-on" style="display:none;">Power, Finesse, Resilience</span>
        </label>
      </div>
    </details>
    <details open>
      <summary>
        <h2>Core Attributes</h2>
      </summary>
      <div class="section grid">
        <div><label>Strength</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Focus</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Charisma</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Dexterity</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Wits</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Subterfuge</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Endurance</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Resolve</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
        <div><label>Awareness</label>
          <div class="dot-container">
            <div class="dot core"></div>
            <div class="dot core"></div>
            <div class="dot core"></div>
          </div>
        </div>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Skills</h2>
      </summary>
      <div class="section grid">
        <div class="label-with-tooltip">
          <label>
            Composure
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Wits + Charisma</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
          Defence
          <button class="info-button" onclick="toggleInfo(this)">?</button>
        </label>
          <span class="info-popup">Dexterity + Wits</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
          Fortitude
          <button class="info-button" onclick="toggleInfo(this)">?</button>
        </label>
          <span class="info-popup">Endurance + Resolve</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip"><label>
            Melee
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Strength + Dexterity</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Ranged
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Dexterity + Focus</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Occult
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Focus + Resolve</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Devices
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Focus + Subterfuge</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Might
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Strength + Endurance</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Notice
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Wits + Awareness</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Sneak
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Dexterity + Subterfuge</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Survival
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Endurance + Wits</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
          Deception
          <button class="info-button" onclick="toggleInfo(this)">?</button>
        </label>
          <span class="info-popup">Charisma + Subterfuge</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Influence
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Charisma + Awareness</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Insight
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Subterfuge + Awareness</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
        <div class="label-with-tooltip">
          <label>
            Presence
            <button class="info-button" onclick="toggleInfo(this)">?</button>
          </label>
          <span class="info-popup">Strength + Charisma</span>
          <div class="dot-container">
            <div class="dot skill"></div>
            <div class="dot skill"></div>
            <div class="dot skill"></div>
          </div>
        </div>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Combat Actions</h2>
      </summary>
      <div class="section grid">
        <div>
          <label>Weapon</label>
          <input type="text" class="combat-weapon">
        </div>
        <div>
          <label>Skill</label>
          <select class="combat-skill">
            <option value="Melee">Melee</option>
            <option value="Ranged">Ranged</option>
          </select>
        </div>
        <div>
          <label>Range</label>
          <select class="combat-range">
            <option value="Close">Close</option>
            <option value="Medium">Medium</option>
            <option value="Far">Far</option>
            <option value="Very Far">Very Far</option>
          </select>
        </div>
        <div>
          <label>Type</label>
          <select class="combat-type">
            <option value="Bludgeoning">Bludgeoning</option>
            <option value="Piercing">Piercing</option>
            <option value="Slashing">Slashing</option>
          </select>
        </div>
        <div>
          <label>Damage</label>
          <select class="combat-damage">
            <option value="+1">+1</option>
            <option value="+2">+2</option>
            <option value="+3">+3</option>
            <option value="+4">+4</option>
            <option value="+5">+5</option>
            <option value="+6">+6</option>
          </select>
        </div>
      </div>

      <div class="section grid">
        <div>
          <label>Weapon</label>
          <input type="text" class="combat-weapon">
        </div>
        <div>
          <label>Skill</label>
          <select class="combat-skill">
            <option value="Melee">Melee</option>
            <option value="Ranged">Ranged</option>
          </select>
        </div>
        <div>
          <label>Range</label>
          <select class="combat-range">
            <option value="Close">Close</option>
            <option value="Medium">Medium</option>
            <option value="Far">Far</option>
            <option value="Very Far">Very Far</option>
          </select>
        </div>
        <div>
          <label>Type</label>
          <select class="combat-type">
            <option value="Bludgeoning">Bludgeoning</option>
            <option value="Piercing">Piercing</option>
            <option value="Slashing">Slashing</option>
          </select>
        </div>
        <div>
          <label>Damage</label>
          <select class="combat-damage">
            <option value="+1">+1</option>
            <option value="+2">+2</option>
            <option value="+3">+3</option>
            <option value="+4">+4</option>
            <option value="+5">+5</option>
            <option value="+6">+6</option>
          </select>
        </div>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Bonds</h2>
      </summary>
      <div class="section grid">
        <div>
          <label>Bond 1 <input type="text" class="bond-name" placeholder="Name or Relationship"></label>
          <div class="dot-container">
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
          </div>
        </div>
        <div>
          <label>Bond 2 <input type="text" class="bond-name" placeholder="Name or Relationship"></label>
          <div class="dot-container">
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
          </div>
        </div>
        <div>
          <label>Bond 3 <input type="text" class="bond-name" placeholder="Name or Relationship"></label>
          <div class="dot-container">
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
            <div class="dot bond"></div>
          </div>
        </div>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Training and Specializations</h2>
      </summary>
      <div class="section grid training-grid">
        <div><label>Accounting</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Anthropology</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Archeology</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Art</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Athletics</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Bureaucracy</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Computer Science</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Craft ()</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Criminology</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Demolitions</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Disguise</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Drive</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Firearms</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>First Aid</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Forensics</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Heavy Machinery</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Heavy Weapons</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>History</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>HUMINT</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Law</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Medicine</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Melee Weapons</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Military Science</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Navigate</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Occult</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Persuade</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Pharmacy</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Pilot</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Psychotherapy</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Ride</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Science</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Search</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>SIGINT</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Stealth</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Surgery</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Survival</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Swim</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Unarmed Combat</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Unnatural</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
        <div><label>Language ()</label>
          <div class="dot-container">
            <div class="dot training"></div>
            <div class="dot training"></div>
          </div>
        </div>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Personal Details and Notes</h2>
      </summary>
      <div class="section">
        <textarea id="personal-notes" rows="10" placeholder="Background, history, personality, etc."></textarea>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Wounds and Ailments</h2>
      </summary>
      <div class="section">
        <textarea id="wounds" rows="10" placeholder="Injuries, trauma, conditions, etc."></textarea>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Equipment and Gear</h2>
      </summary>
      <div class="section">
        <textarea id="equipment" rows="10" placeholder="Weapons, tools, supplies, etc."></textarea>
      </div>
    </details>

    <details open>
      <summary>
        <h2>Mission Notes</h2>
      </summary>
      <div class="mission-note-form">
        <input type="text" id="mission-title" placeholder="Mission Title" />
        <textarea id="mission-body" placeholder="Details of the mission..."></textarea>
        <input type="text" id="mission-tags" placeholder="Tags (comma-separated)" />
        <button onclick="addMissionNote()">Add Note</button>
      </div>

      <!-- Filters -->
      <div class="mission-filters">
        <label for="tag-filter">Filter by Tag:</label>
        <select id="tag-filter" onchange="renderMissionNotes()">
          <option value="">All</option>
        </select>

        <label for="sort-order">Sort:</label>
        <select id="sort-order" onchange="renderMissionNotes()">
          <option value="desc">Newest First</option>
          <option value="asc">Oldest First</option>
        </select>
      </div>

      <div id="mission-notes-list"></div>

    </details>



  </div>
  </div>
  <div id="save-modal" class="modal">
    <div class="modal-content">
      <h3>Save Character Sheet</h3>
      <label for="filename-input">File Name:</label>
      <input type="text" id="filename-input" placeholder="e.g. Agent_Smith">
      <div class="modal-buttons">
        <button onclick="confirmSave()">Download</button>
        <button onclick="closeSaveModal()">Cancel</button>
      </div>
    </div>
  </div>

  <div id="dice-modal" class="modal">
    <div class="modal-content">
      <h3>Dice Roller</h3>
      <p>Select Dice Pool</p>
      <div class="dice-pool">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>

      <div id="dice-results" class="dice-results" style="display: none;"></div>

      <div class="modal-buttons">
        <button onclick="rollDice()">Roll Dice</button>
        <button onclick="closeDiceModal()">Close</button>
      </div>
    </div>
  </div>
</body>

</html>
